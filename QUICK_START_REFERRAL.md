# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:

1. ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –ë–î (`006_referral_system.sql`)
2. ‚úÖ –°–æ–∑–¥–∞–Ω—ã 3 –±–æ—Ç–∞:
   - **–†–µ–∫–ª–∞–º–Ω—ã–π –±–æ—Ç** (`ad_bot.py`) - –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∫–ª–∞–º—ã
   - **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–æ—Ç** (`referral_bot.py`) - –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–æ–¥–ø–∏—Å–æ–∫
   - **–û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç** (`main.py`) - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∫–ª–∞–º—É

## üéØ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
./start_all_bots.sh
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Ç—Ä–∏ –±–æ—Ç–∞ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç—ã –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
./bin/python3 main.py &

# –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–æ—Ç
./bin/python3 referral_bot.py &

# –†–µ–∫–ª–∞–º–Ω—ã–π –±–æ—Ç
./bin/python3 ad_bot.py &
```

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã:

```bash
ps aux | grep "python3.*bot"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:

```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
tail -f bot.log

# –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–æ—Ç
tail -f referral_bot.log

# –†–µ–∫–ª–∞–º–Ω—ã–π –±–æ—Ç
tail -f ad_bot.log
```

## üéÅ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞ –≤ Telegram

–ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –ø–æ —Ç–æ–∫–µ–Ω—É: `7711613851:AAFuWdI8YA77YuUFGHnGHjr8ju1v93mE4TE`

```
https://t.me/–í–ê–®_–†–ï–§–ï–†–ê–õ–¨–ù–´–ô_–ë–û–¢_USERNAME
```

### 2. –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É

- –ù–∞–∂–º–∏—Ç–µ `/start`
- –í—ã–±–µ—Ä–∏—Ç–µ "üéÅ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞"
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≤–æ—é —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É

### 3. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π

- –ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–≥–∞ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ
- –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤—ã –æ–±–∞ –ø–æ–ª—É—á–∏—Ç–µ **7 –¥–Ω–µ–π –ø—Ä–µ–º–∏—É–º–∞**!

## üì¢ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º—ã

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –±–æ—Ç–∞

–ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –ø–æ —Ç–æ–∫–µ–Ω—É: `8355852802:AAFnZgJ9dJ5Pjs3JP4tz8wUnvrCAfP8S-xk`

```
https://t.me/–í–ê–®_–†–ï–ö–õ–ê–ú–ù–´–ô_–ë–û–¢_USERNAME
```

### 2. –î–æ–±–∞–≤—å—Ç–µ ID –∞–¥–º–∏–Ω–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `ad_bot.py` –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π Telegram ID:

```python
ADMIN_USER_IDS = [954467391, –í–ê–®_TELEGRAM_ID]
```

### 3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ä–µ–∫–ª–∞–º—É

–ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É:
- –¢–µ–∫—Å—Ç
- –§–æ—Ç–æ —Å –ø–æ–¥–ø–∏—Å—å—é
- –í–∏–¥–µ–æ —Å –ø–æ–¥–ø–∏—Å—å—é
- –î–æ–∫—É–º–µ–Ω—Ç

–†–µ–∫–ª–∞–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –∏ –Ω–∞—á–Ω–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è!

### 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–æ–π

```
/stats - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/list - —Å–ø–∏—Å–æ–∫ —Ä–µ–∫–ª–∞–º
/activate [id] - –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
/deactivate [id] - –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
/delete [id] - —É–¥–∞–ª–∏—Ç—å
```

## üíé –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

### –î–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

- –†–µ–∫–ª–∞–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **–º–∞–∫—Å–∏–º—É–º 5 —Ä–∞–∑ –≤ –¥–µ–Ω—å**
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–æ–∫–∞–∑–∞–º–∏: **–º–∏–Ω–∏–º—É–º 2 —á–∞—Å–∞**
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑–∞: **30%** –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

### –î–ª—è –ø—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

- ‚úÖ **–ù–∏–∫–∞–∫–æ–π —Ä–µ–∫–ª–∞–º—ã**!
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

## üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–æ–≤

```bash
./stop_all_bots.sh
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
pkill -9 -f "python3 main.py"
pkill -9 -f "python3 referral_bot.py"
pkill -9 -f "python3 ad_bot.py"
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∫–∞–∑–∞ —Ä–µ–∫–ª–∞–º—ã

–û—Ç–∫—Ä–æ–π—Ç–µ `ad_system.py` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```python
MIN_AD_INTERVAL = 120  # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (–º–∏–Ω—É—Ç—ã)
MAX_ADS_PER_DAY = 5     # –ú–∞–∫—Å–∏–º—É–º –ø–æ–∫–∞–∑–æ–≤ –≤ –¥–µ–Ω—å
AD_SHOW_PROBABILITY = 0.3  # –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑–∞ (0.0-1.0)
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –ë–î:

```sql
-- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
SELECT * FROM v_premium_users;

-- –¢–æ–ø —Ä–µ—Ñ–µ—Ä–µ—Ä–æ–≤
SELECT * FROM v_referral_stats;

-- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–∫–ª–∞–º—ã
SELECT * FROM v_ad_performance;
```

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ —Ñ–∞–π–ª–∞—Ö
grep "BOT_TOKEN" referral_bot.py ad_bot.py

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
./bin/python3 -c "from config import config; print(config.DB_NAME)"
```

### –ü—Ä–æ–±–ª–µ–º–∞: –†–µ–∫–ª–∞–º–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –µ—Å—Ç—å –ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–∫–ª–∞–º—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–µ–º–∏—É–º-—Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–∫–∞–∑–∞

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–∫–ª–∞–º
SELECT COUNT(*) FROM advertisements WHERE is_active = TRUE;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT is_premium, last_ad_shown FROM user_main WHERE user_id = YOUR_ID;
```

## üí° –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π:**
   - –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –ÆKassa / CryptoBot
   - –°–º. —Ä–∞–∑–¥–µ–ª "–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è" –≤ `REFERRAL_SYSTEM_README.md`

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–æ–∫:**
   - –î–æ–±–∞–≤—å—Ç–µ –≤ cron –∑–∞–¥–∞—á—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å—Ç–µ–∫—à–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫
   - –†–∞–∑ –≤ –¥–µ–Ω—å –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `check_expired_subscriptions()`

3. **–î–æ–±–∞–≤—å—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏–∫—É:**
   - Grafana + Prometheus –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   - –î–∞—à–±–æ—Ä–¥ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ MRR, CAC, LTV

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `REFERRAL_SYSTEM_README.md`

---

**–£–¥–∞—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞! üöÄ**


