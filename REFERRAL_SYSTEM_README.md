# üéÅ –†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ò –ú–û–ù–ï–¢–ò–ó–ê–¶–ò–Ø PROPITASHKA

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
4. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
5. [API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#api-–∏-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
6. [–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è](#–º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è)
7. [FAQ](#faq)

---

## üåü –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ PROpitashka —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤:

### 1. **–û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç** (`main.py`)
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç—ã —Å –ø–∏—Ç–∞–Ω–∏–µ–º –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏
- –ü–æ–∫–∞–∑ —Ä–µ–∫–ª–∞–º—ã –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–º–∏—É–º-—Å—Ç–∞—Ç—É—Å–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π

### 2. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–æ—Ç** (`referral_bot.py`)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–µ—Ä–µ—Ö–æ–¥ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç

### 3. **–†–µ–∫–ª–∞–º–Ω—ã–π –±–æ—Ç** (`ad_bot.py`)
- –ü—Ä–∏–µ–º —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω—ã–º–∏ –∫–∞–º–ø–∞–Ω–∏—è–º–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑–æ–≤ –∏ –∫–ª–∏–∫–æ–≤

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

1. **`subscriptions`** - –ü–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `id` - ID –ø–æ–¥–ø–∏—Å–∫–∏
   - `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `subscription_type` - –¢–∏–ø (`free`, `premium_monthly`, `premium_yearly`)
   - `start_date` / `end_date` - –ü–µ—Ä–∏–æ–¥ –¥–µ–π—Å—Ç–≤–∏—è
   - `is_active` - –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞
   - `price` / `currency` - –°—Ç–æ–∏–º–æ—Å—Ç—å –∏ –≤–∞–ª—é—Ç–∞

2. **`referrals`** - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏
   - `referrer_id` - –ö—Ç–æ –ø—Ä–∏–≥–ª–∞—Å–∏–ª
   - `referred_id` - –ö–æ–≥–æ –ø—Ä–∏–≥–ª–∞—Å–∏–ª–∏
   - `referral_code` - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥
   - `status` - –°—Ç–∞—Ç—É—Å (`pending`, `activated`, `rewarded`)
   - `reward_type` / `reward_value` - –¢–∏–ø –∏ —Ä–∞–∑–º–µ—Ä –Ω–∞–≥—Ä–∞–¥—ã

3. **`advertisements`** - –†–µ–∫–ª–∞–º–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
   - `id` - ID —Ä–µ–∫–ª–∞–º—ã
   - `content` - –¢–µ–∫—Å—Ç
   - `media_type` - –¢–∏–ø (`text`, `photo`, `video`)
   - `media_file_id` - Telegram file_id
   - `priority` - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–∫–∞–∑–∞
   - `impressions_count` / `clicks_count` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

4. **`ad_views`** - –ü—Ä–æ—Å–º–æ—Ç—Ä—ã —Ä–µ–∫–ª–∞–º—ã
   - `user_id` - –ö—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–µ–ª
   - `ad_id` - –ö–∞–∫—É—é —Ä–µ–∫–ª–∞–º—É
   - `viewed_at` - –ö–æ–≥–¥–∞
   - `clicked` - –ö–ª–∏–∫–Ω—É–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

- **`user_main`** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è:
  - `is_premium` - –ü—Ä–µ–º–∏—É–º —Å—Ç–∞—Ç—É—Å
  - `premium_until` - –î–æ –∫–∞–∫–æ–π –¥–∞—Ç—ã –ø—Ä–µ–º–∏—É–º
  - `referral_code` - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `referred_by` - –ö–µ–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω
  - `total_referrals` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
  - `last_ad_shown` - –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–∫–∞–∑–∞ —Ä–µ–∫–ª–∞–º—ã

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–π PostgreSQL –±–∞–∑–µ
psql -U your_username -d your_database

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
\i migrations/006_referral_system.sql
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –±–æ—Ç–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª—ã –∏ —É–∫–∞–∂–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã:

**`referral_bot.py`:**
```python
REFERRAL_BOT_TOKEN = "7711613851:AAFuWdI8YA77YuUFGHnGHjr8ju1v93mE4TE"
MAIN_BOT_USERNAME = "–≤–∞—à_–æ—Å–Ω–æ–≤–Ω–æ–π_–±–æ—Ç"  # –ë–µ–∑ @
```

**`ad_bot.py`:**
```python
AD_BOT_TOKEN = "8355852802:AAFnZgJ9dJ5Pjs3JP4tz8wUnvrCAfP8S-xk"
ADMIN_USER_IDS = [954467391]  # –í–∞—à Telegram ID
```

### 3. –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏

```bash
chmod +x start_all_bots.sh
chmod +x stop_all_bots.sh
```

### 4. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

```bash
./start_all_bots.sh
```

–í—Å–µ –±–æ—Ç—ã –∑–∞–ø—É—Å—Ç—è—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ. –õ–æ–≥–∏ –±—É–¥—É—Ç –≤ –ø–∞–ø–∫–µ `logs/`.

### 5. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã

```bash
./stop_all_bots.sh
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–º–∏—É–º –±–µ—Å–ø–ª–∞—Ç–Ω–æ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞
2. –ü–æ–ª—É—á–∏—Ç–µ —Å–≤–æ—é —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
3. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å –¥—Ä—É–∑—å—è–º–∏
4. –ó–∞ –∫–∞–∂–¥–æ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥—Ä—É–≥–∞ - **7 –¥–Ω–µ–π –ø—Ä–µ–º–∏—É–º–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ**!

#### –ü–æ–∫—É–ø–∫–∞ –ø—Ä–µ–º–∏—É–º–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞
2. –í—ã–±–µ—Ä–∏—Ç–µ "üíé –ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞"
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ:
   - 1 –º–µ—Å—è—Ü - 199‚ÇΩ
   - 3 –º–µ—Å—è—Ü–∞ - 499‚ÇΩ (-16%)
   - 12 –º–µ—Å—è—Ü–µ–≤ - 1499‚ÇΩ (-38%)
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
5. –û–ø–ª–∞—Ç–∏—Ç–µ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø—Ä–µ–º–∏—É–º–∞:

‚úÖ –ë–µ–∑ —Ä–µ–∫–ª–∞–º—ã  
‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7  
‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞  
‚úÖ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏  
‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç AI  
‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ PDF  
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Apple Health / Google Fit  

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º—ã:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –±–æ—Ç–∞ (`ad_bot`)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç
3. –†–µ–∫–ª–∞–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –∏ –Ω–∞—á–Ω–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–æ–π:

```
/stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∫–ª–∞–º—ã
/list - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ–∫–ª–∞–º
/activate [id] - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–ª–∞–º—É
/deactivate [id] - –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–ª–∞–º—É
/delete [id] - –£–¥–∞–ª–∏—Ç—å —Ä–µ–∫–ª–∞–º—É
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∫–∞–∑–∞ —Ä–µ–∫–ª–∞–º—ã:

–í —Ñ–∞–π–ª–µ `ad_system.py`:

```python
MIN_AD_INTERVAL = 120  # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–æ–∫–∞–∑–∞–º–∏ (–º–∏–Ω—É—Ç—ã)
MAX_ADS_PER_DAY = 5     # –ú–∞–∫—Å–∏–º—É–º –ø–æ–∫–∞–∑–æ–≤ –≤ –¥–µ–Ω—å
AD_SHOW_PROBABILITY = 0.3  # –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑–∞ (30%)
```

---

## üîå API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ú–æ–¥—É–ª—å `ad_system.py`

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–º–∏—É–º-—Å—Ç–∞—Ç—É—Å–∞:

```python
from ad_system import is_premium_user

if is_premium_user(cursor, user_id):
    print("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–º–∏—É–º!")
```

#### –ü–æ–∫–∞–∑ —Ä–µ–∫–ª–∞–º—ã:

```python
from ad_system import show_ad_to_user

# –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∫–ª–∞–º—É
await show_ad_to_user(bot, cursor, user_id, chat_id)
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–µ–º–∏—É–º–µ:

```python
from ad_system import get_user_premium_info

info = get_user_premium_info(cursor, user_id)
print(f"–ü—Ä–µ–º–∏—É–º: {info['is_premium']}")
print(f"–û—Å—Ç–∞–ª–æ—Å—å –¥–Ω–µ–π: {info['days_left']}")
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç

–î–æ–±–∞–≤—å—Ç–µ –≤ `main.py`:

```python
import ad_system

# –í –ª—é–±–æ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –∫–æ–º–∞–Ω–¥—ã:
@dp.message(F.text == "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é")
async def main_menu(message: Message):
    # –í–∞—à –∫–æ–¥...
    
    # –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∫–ª–∞–º—É
    await ad_system.show_ad_to_user(
        bot=bot,
        cursor=cursor,
        user_id=message.from_user.id,
        chat_id=message.chat.id
    )
```

### –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫

–î–æ–±–∞–≤—å—Ç–µ –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á (cron):

```python
import ad_system

async def daily_subscription_check():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫ —Ä–∞–∑ –≤ –¥–µ–Ω—å"""
    await ad_system.check_expired_subscriptions(cursor)

# –î–æ–±–∞–≤—å—Ç–µ –≤ aiogram-scheduler –∏–ª–∏ cron
```

---

## üí∞ –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

### –ú–æ–¥–µ–ª–∏ –∑–∞—Ä–∞–±–æ—Ç–∫–∞

#### 1. **–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∏**

**–¢–∞—Ä–∏—Ñ—ã:**
- 1 –º–µ—Å—è—Ü: 199‚ÇΩ
- 3 –º–µ—Å—è—Ü–∞: 499‚ÇΩ (-16%)
- 12 –º–µ—Å—è—Ü–µ–≤: 1499‚ÇΩ (-38%)

**–û–∂–∏–¥–∞–µ–º–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è:** 2-5% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–æ–≥–Ω–æ–∑ –ø—Ä–∏ 10,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- –ü—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 200-500
- –°—Ä–µ–¥–Ω–∏–π —á–µ–∫: 500‚ÇΩ
- **MRR (–µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥): 100,000 - 250,000‚ÇΩ**

#### 2. **–†–µ–∫–ª–∞–º–∞**

**CPM (—Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ 1000 –ø–æ–∫–∞–∑–æ–≤):** 100-300‚ÇΩ
**CPC (—Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –∫–ª–∏–∫):** 10-50‚ÇΩ

**–ü—Ä–æ–≥–Ω–æ–∑ –ø—Ä–∏ 10,000 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- –ü–æ–∫–∞–∑—ã –≤ –¥–µ–Ω—å: ~15,000 (5 –ø–æ–∫–∞–∑–æ–≤ –Ω–∞ 3,000 –∞–∫—Ç–∏–≤–Ω—ã—Ö)
- –ü–æ–∫–∞–∑—ã –≤ –º–µ—Å—è—Ü: ~450,000
- **–î–æ—Ö–æ–¥: 45,000 - 135,000‚ÇΩ/–º–µ—Å—è—Ü**

#### 3. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞**

–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –º–∞—Ä–∫–µ—Ç–∏–Ω–≥! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∞–º–∏ –ø—Ä–∏–≤–ª–µ–∫–∞—é—Ç –¥—Ä—É–∑–µ–π.

**Viral coefficient:**
- –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–≤–æ–¥–∏—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º 0.5-1 –¥—Ä—É–≥–∞
- –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–π —Ä–æ—Å—Ç –±–∞–∑—ã –Ω–∞ 50-100% –≤ –º–µ—Å—è—Ü

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π

#### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã:

1. **–ÆKassa (YooMoney)**
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://yookassa.ru/developers
   - –ö–æ–º–∏—Å—Å–∏—è: 2.8% + 10‚ÇΩ

2. **CryptoBot**
   - –î–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://help.crypt.bot/
   - –ö–æ–º–∏—Å—Å–∏—è: 0-1%

3. **Telegram Stars**
   - –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤–∞–ª—é—Ç–∞ Telegram
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://core.telegram.org/bots/payments
   - –ö–æ–º–∏—Å—Å–∏—è: ~10%

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ÆKassa

```python
from yookassa import Configuration, Payment

Configuration.account_id = 'your_shop_id'
Configuration.secret_key = 'your_secret_key'

async def create_payment(user_id, amount, description):
    payment = Payment.create({
        "amount": {
            "value": str(amount),
            "currency": "RUB"
        },
        "confirmation": {
            "type": "redirect",
            "return_url": "https://t.me/your_bot"
        },
        "capture": True,
        "description": description
    })
    
    return payment.confirmation.confirmation_url
```

---

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã

### SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫:

```sql
SELECT 
    subscription_type,
    COUNT(*) as count,
    SUM(price) as total_revenue
FROM subscriptions
WHERE is_active = TRUE
GROUP BY subscription_type;
```

#### –¢–æ–ø —Ä–µ—Ñ–µ—Ä–µ—Ä–æ–≤:

```sql
SELECT 
    um.user_id,
    um.user_name,
    um.total_referrals,
    COUNT(r.id) as active_referrals
FROM user_main um
LEFT JOIN referrals r ON um.user_id = r.referrer_id AND r.status = 'activated'
GROUP BY um.user_id, um.user_name, um.total_referrals
ORDER BY um.total_referrals DESC
LIMIT 10;
```

#### –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–∫–ª–∞–º—ã:

```sql
SELECT 
    id,
    title,
    impressions_count,
    clicks_count,
    ROUND((clicks_count::DECIMAL / NULLIF(impressions_count, 0)) * 100, 2) as ctr
FROM advertisements
WHERE is_active = TRUE
ORDER BY ctr DESC;
```

### –î–∞—à–±–æ—Ä–¥ –º–µ—Ç—Ä–∏–∫

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:

1. **MRR (Monthly Recurring Revenue)** - –º–µ—Å—è—á–Ω—ã–π –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –¥–æ—Ö–æ–¥
2. **CAC (Customer Acquisition Cost)** - —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
3. **LTV (Lifetime Value)** - –ø–æ–∂–∏–∑–Ω–µ–Ω–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
4. **Churn Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç—Ç–æ–∫–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
5. **Conversion Rate** - –∫–æ–Ω–≤–µ—Ä—Å–∏—è –∏–∑ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤ –ø–ª–∞—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é

---

## üõ† Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –†–µ–∫–ª–∞–º–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –µ—Å—Ç—å –ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–∫–ª–∞–º—ã: `/list` –≤ —Ä–µ–∫–ª–∞–º–Ω–æ–º –±–æ—Ç–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–µ–º–∏—É–º-—Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `SELECT is_premium FROM user_main WHERE user_id = ?`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–∫–∞–∑–∞: `SELECT last_ad_shown FROM user_main WHERE user_id = ?`

### –ü—Ä–æ–±–ª–µ–º–∞: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞: `SELECT referral_code FROM user_main WHERE user_id = ?`
2. –ï—Å–ª–∏ NULL - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: `UPDATE user_main SET referral_code = generate_referral_code(user_id) WHERE user_id = ?`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞: `tail -f logs/referral_bot.log`

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–µ–º–∏—É–º –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–µ—Ñ–µ—Ä–∞–ª–∞

**–†–µ—à–µ–Ω–∏–µ:**
```sql
-- –í—Ä—É—á–Ω—É—é –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª:
SELECT activate_referral(referred_user_id);
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫—Ä—É—Ç–∫–∏

1. **–õ–∏–º–∏—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –≤ –¥–µ–Ω—å** - –º–∞–∫—Å–∏–º—É–º 10 –Ω–æ–≤—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –≤ –¥–µ–Ω—å
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** - —Ä–µ—Ñ–µ—Ä–∞–ª –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –ø–æ–ª–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
3. **IP-—Ç—Ä–µ–∫–∏–Ω–≥** - (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ IP –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–æ–≤

### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

- –í—Å–µ —Ç–æ–∫–µ–Ω—ã –≤ `.env`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ prepared statements (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL-injection)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏ —Ä–æ—Å—Ç–µ > 50,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–µ–º–∏—É–º
   - TTL: 1 —á–∞—Å

2. **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á**
   - Celery + RabbitMQ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞—Å—Å—ã–ª–æ–∫
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã

3. **CDN –¥–ª—è –º–µ–¥–∏–∞**
   - S3 + CloudFront –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

4. **–†–µ–ø–ª–∏–∫–∞—Ü–∏—è –ë–î**
   - Master-Slave —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è PostgreSQL
   - –ß—Ç–µ–Ω–∏–µ —Å–æ slave, –∑–∞–ø–∏—Å—å –≤ master

---

## üí° –ò–¥–µ–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

1. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–ª–∞–º—ã** - —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
2. **–ì–µ–æ—Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥** - —Ä–µ–∫–ª–∞–º–∞ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º/–≥–æ—Ä–æ–¥–∞–º
3. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** - —Ä–µ–∫–ª–∞–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞** - –ø–ª–∞—Ç–∏—Ç–µ –∫–æ–º–∏—Å—Å–∏—é –∑–∞ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. **–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏** - –ø—Ä–æ–¥–∞–≤–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫–æ–º–ø–∞–Ω–∏—è–º
6. **White Label** - –ø—Ä–æ–¥–∞–≤–∞–π—Ç–µ –ª–∏—Ü–µ–Ω–∑–∏—é –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **Email:** support@propitashka.ru
- **Telegram:** @propitashka_support
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://docs.propitashka.ru

---

## üìù Changelog

### v1.0.0 (2025-10-31)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Ä–µ–∫–ª–∞–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–æ—Ç
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ä–µ–∫–ª–∞–º–Ω—ã–π –±–æ—Ç
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary - –≤—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è PROpitashka**


